---
id: workflow.tasklifecycle.phase-1-research
description: Task cycle Phase 1. Exhaustive technical research of needs and alternatives. Requires explicit developer approval.
owner: researcher-agent
version: 1.1.0
severity: PERMANENT
trigger:
  commands: ["phase1", "phase-1", "research"]
blocking: true
---

# WORKFLOW: tasklifecycle.phase-1-research

## Input (REQUIRED)
- Current task exists:
  - `.agent/artifacts/<taskId>-<taskTitle>/task.md`
- `task.md` **MUST** reflect:
  - `task.phase.current == aliases.taskcycle-long.phases.phase_1.id`
- `task.md` **MUST** include:
  - Description
  - Objective
  - Defined acceptance criteria

> [!IMPORTANT]
> **Active Constitution (MANDATORY)**:
> - Load `constitution.project_architecture` before starting
> - Load `constitution.agents_behavior` (Section 7: Gates, Section 8: Constitution)

## Output (REQUIRED)
- Research report (mandatory, generated by researcher-agent):
  - `.agent/artifacts/<taskId>-<taskTitle>/researcher/research.md`
- Status update in current task:
  - `.agent/artifacts/<taskId>-<taskTitle>/task.md`

## Objective (ONLY)
- Investigate technical needs detected for the task.
- Explore relevant alternatives and APIs.
- Document multi-browser compatibility and risks.
- Deliver a rigorous and verifiable report to the architect-agent.

> This phase **DOES NOT implement code**.
> This phase **REQUIRES explicit developer approval**.

> [!CAUTION]
> **PERMANENT RULE**: Research DOCUMENTS, it DOES NOT analyze.
> The researcher-agent gathers information from official sources.
> **FORBIDDEN**: Proposing solutions, evaluating trade-offs, recommending alternatives.
> Analysis belongs to Phase 2.

## Template (MANDATORY)
- The report **MUST** be created using the template:
  - `templates.research`
- If the template doesn't exist or cannot be loaded â†’ **FAIL**.

---

## Reasoning (MANDATORY)
- Before executing, the responsible agent must explain to the developer what will be done and why.
- No document is required for this step.

## Mandatory Steps

0. **Role Activation and Prefix (MANDATORY)**
   - The `architect-agent` **MUST** begin its intervention by identifying itself.
   - Message: `ðŸ›ï¸ **architect-agent**: Starting Phase 1 - Research.`

1. Verify inputs (architect-agent)
   - `task.md` exists
   - `task.phase.current == aliases.taskcycle-long.phases.phase_1.id`
   - `task.md` contains acceptance criteria
   - If fails â†’ go to **Step 8 (FAIL)**.

2. Load research template (architect-agent)
   - Load `templates.research`
   - If it doesn't exist or cannot be read â†’ go to **Step 8 (FAIL)**.

3. **Delegate to researcher-agent (MANDATORY)**
   > âš ï¸ **PERMANENT RULE**: The `architect-agent` **CANNOT** create the research report.
   > The `researcher-agent` is the **only authorized agent** to create `research.md`.

   The `architect-agent` **MUST**:
   a) Activate the `researcher-agent` with the task context:
      - Task description and objective
      - Acceptance criteria
      - Template to use (`templates.research`)
   b) The `researcher-agent` **MUST** identify itself: `ðŸ”¬ **researcher-agent**: Starting technical research for <taskName>...`
   c) Wait for the `researcher-agent` to complete its report
   d) Verify that the report exists and complies with the template

   The `researcher-agent` **MUST**:
   - Create directory: `.agent/artifacts/<taskId>-<taskTitle>/researcher/`
   - Create report: `.agent/artifacts/<taskId>-<taskTitle>/researcher/research.md` (using `templates.research`)
   - Cover all mandatory points:
     - Technical alternatives and relevant APIs
     - Multi-browser compatibility
     - Risks and trade-offs
     - AI-first recommendations
     - Official or prestigious sources
   - Hand back control to the `architect-agent` upon completion

4. Request developer approval (MANDATORY, via console)
   - The developer **MUST** issue a binary decision:
     - **YES** â†’ Approved
     - **NO** â†’ Rejected
   - Record the decision in `research.md` with format:
     ```yaml
     approval:
       developer:
         decision: YES | NO
         date: <ISO-8601>
         comments: <optional>
     ```
   - If `decision != YES` â†’ go to **Step 8 (FAIL)**.

5. PASS
   - Update `.agent/artifacts/<taskId>-<taskTitle>/task.md` (using prefix):
     - Mark Phase 1 as completed
     - Set `task.lifecycle.phases.phase-1-research.validated_at = <ISO-8601>`
     - Update `task.phase.updated_at = <ISO-8601>`
     - Advance `task.phase.current = aliases.taskcycle-long.phases.phase_2.id`

---

## FAIL (MANDATORY)

8. Declare Phase 1 as **NOT completed**.
   - Specify exactly what failed.
   - End blocked: do not advance phase.

---

## Pass
- All required artifacts are created from templates.
- Developer approval is recorded where required.

## Gate (REQUIRED)

Requirements (all mandatory):
1. `.agent/artifacts/<taskId>-<taskTitle>/researcher/research.md` exists.
2. The report follows the `templates.research` template structure.
3. The report was created by the `researcher-agent`.
4. Explicit developer approval is recorded in `research.md`:
   - `approval.developer.decision == YES`
5. `task.md` reflects timestamps and state:
   - `task.phase.current == aliases.taskcycle-long.phases.phase_2.id`
   - `task.lifecycle.phases.phase-1-research.completed == true`
   - `task.lifecycle.phases.phase-1-research.validated_at` not null
   - `task.phase.updated_at` not null

If Gate FAIL:
- Execute **Step 8 (FAIL)**.
